function get_existing_edittable(t){var e=!1;return $.each(edittable_list,function(n,a){a.element==t&&(e=t)}),e}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t}var edittable_core=function(){var t=this;t.element=""};edittable_core.prototype.create_line_menu=function(t){var e=this,n=$("<td class='line_action_menu'>"),a=$("<select>");$(a).append("<option data-action='edit'>Edit</option>"),$(a).append("<option data-action='delete'>Delete</option>"),$(a).append("<option data-action='party'>Party</option>"),$(a).appendTo(n);var i=$("<button>");$(i).text("Ausf√ºhren"),$(i).appendTo(n),$(n).appendTo(t),$(i).bind("click",function(){var n=this,a=$(n).parent("td").find("select option:selected").attr("data-action");switch(a){case"edit":var d=$(t).find("td").length;$(t).find("td:nth-child(-n+"+(d-1)+")").each(function(t,e){var n=$(e).html();$(e).html("<input type='text' value='"+n+"'>")}),$(i).unbind("click"),$(t).find("td").last().find("*").unbind().remove();var r=$("<button>");$(r).text("Save"),$(r).appendTo($(t).find("td").last()),$(r).bind("click",function(){var t=$(this);e.save_line(t)});break;case"delete":var o={};o.action="delete",o.db_id=$(t).attr("data-db_id"),$(t).find("td").last().find("*").unbind().remove();var l=$("<button>");$(l).html("<i class='fa fa-spinner fa-spin'></i>"),$(l).appendTo($(t).find("td").last());try{e.kwargs.ondelete(o,n,l)}catch(c){console.error(c)}$(t).remove();break;case"party":var p=0,s=window.setInterval(function(){var e=$(t).find("td").length,n=getRandomInt(0,e),a=$(t).find("td")[n],i=getRandomInt(0,255),d=getRandomInt(0,255),r=getRandomInt(0,255);$(a).css({"background-color":"rgb("+i+","+d+","+r+")"}),p>=100&&window.clearInterval(s),p++},250)}})},edittable_core.prototype.save_line=function(t){var e=this,n={},a=$(t).parent("td").parent("tr").find("td").length;$(t).parent("td").parent("tr").find("td:nth-child(-n+"+(a-1)+")").each(function(t,a){var i=$(a).find("input").val(),d=e.get_headline(t);n[d]=i,$(a).html(i)}),n.db_id=$(t).parent("td").parent("tr").attr("data-db_id"),n.action="save",$(t).unbind("click"),$(t).html("<i class='fa fa-spinner fa-spin'></i>");try{e.kwargs.onedit(n,e,t)}catch(i){console.error(i)}},edittable_core.prototype.stop_spinner=function(t){var e=this,n=$(t).parent("td").parent("tr");$(n).find("td").last().remove(),e.create_line_menu(n)},edittable_core.prototype.get_headline=function(t){var e=this;return $(e.element).find("tr").find("th:nth-child("+(t+1)+")").html().toLowerCase()};var edittable_list;edittable_list=[],jQuery.fn.extend({edittable:function(t){var e=$(this),n=get_existing_edittable(e),a="Action";if("col_headline"in t)var a=t.col_headline;if(!n){var i=new edittable_core;i.element=e,i.kwargs=t;var d=$("<th>");$(d).html(a),$(d).appendTo($(e).find("tr")[0]),$(e).find("tr:nth-child(n+2)").each(function(t,e){i.create_line_menu(e)}),edittable_list.push(i)}}});